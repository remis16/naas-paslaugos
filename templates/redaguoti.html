<!DOCTYPE html>
<html lang="{{ lang }}">
<head>
    <meta charset="UTF-8" />
    <title>{{ translations.get('edit_service', 'Redaguoti paslaugą') }}</title>

    <!-- Tailwind CDN -->
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 text-gray-800 py-6 px-4">

<main class="max-w-3xl mx-auto bg-white p-6 rounded shadow">
    <h1 class="text-2xl font-bold mb-6">
        ✏️ {{ translations.get('edit_service', 'Redaguoti paslaugą') }}<br>
        <span class="text-sm text-gray-500">({{ kategorija.replace('_', ' ').title() }} → {{ subkategorija.replace('_', ' ').title() }})</span>
    </h1>

    <form method="POST" autocomplete="off" class="space-y-4">
        <input type="hidden" name="kategorija" value="{{ kategorija }}">
        <input type="hidden" name="subkategorija" value="{{ subkategorija }}">
        <input type="hidden" name="index" value="{{ index }}">

        {% set fields = [
            {'label': 'Pavadinimas', 'name': 'pavadinimas', 'type': 'text', 'value': paslauga.pavadinimas, 'required': True},
            {'label': 'Adresas', 'name': 'adresas', 'type': 'text', 'value': paslauga.adresas, 'required': True},
            {'label': 'Telefonas', 'name': 'telefonas', 'type': 'tel', 'value': paslauga.telefonas, 'required': True, 'pattern': '\\+?\\d{7,15}', 'title': 'Įveskite teisingą telefono numerį'},
            {'label': 'Darbo laikas', 'name': 'darbo_laikas', 'type': 'text', 'value': paslauga.darbo_laikas, 'required': True},
            {'label': 'Google Maps nuoroda', 'name': 'maps', 'type': 'url', 'value': paslauga.maps, 'required': True},
            {'label': 'Svetainė (neprivaloma)', 'name': 'svetaine', 'type': 'url', 'value': paslauga.svetaine},
            {'label': 'Nuotraukos kelias (neprivaloma)', 'name': 'nuotrauka', 'type': 'text', 'value': paslauga.nuotrauka}
        ] %}

        {% for field in fields %}
        <div>
            <label for="{{ field.name }}" class="block font-medium mb-1">{{ field.label }}:</label>
            <input
                type="{{ field.type }}"
                id="{{ field.name }}"
                name="{{ field.name }}"
                value="{{ field.value }}"
                class="w-full border rounded p-2"
                {% if field.required %}required{% endif %}
                {% if field.pattern %}pattern="{{ field.pattern }}"{% endif %}
                {% if field.title %}title="{{ field.title }}"{% endif %}
            >
        </div>
        {% endfor %}

        <div>
            <label for="aprasymas" class="block font-medium mb-1">Aprašymas:</label>
            <textarea
                id="aprasymas"
                name="aprasymas"
                class="w-full border rounded p-2"
                required
                minlength="10"
                maxlength="1000"
            >{{ paslauga.aprasymas }}</textarea>
        </div>

        <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition">
            💾 Išsaugoti pakeitimus
        </button>
    </form>

    <div class="mt-6">
        <a href="{{ url_for('admin') }}" class="text-blue-600 hover:underline">⬅️ Grįžti į administravimo skydelį</a>
    </div>

    <!-- Kalbos perjungikliai -->
    <div class="mt-8 text-sm text-center space-x-2">
        {% for code, name in [('lt', 'Lietuva'), ('en', 'UK'), ('de', 'Vokietija'), ('fr', 'Prancūzija'), ('it', 'Italija'), ('pt', 'Portugalija'), ('ro', 'Rumunija'), ('pl', 'Lenkija')] %}
            <a href="{{ url_for('set_language', lang_code=code) }}" class="text-blue-600 hover:underline">{{ name }}</a>
        {% endfor %}
    </div>
</main>

<footer class="mt-8 text-center text-sm text-gray-500">
    <p>&copy; {{ year }} Naas City Services. {{ translations.get('rights_reserved', 'Visos teisės saugomos.') }}</p>
</footer>

</body>
</html>